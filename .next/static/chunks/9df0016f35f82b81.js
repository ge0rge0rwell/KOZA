(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,5665,e=>{"use strict";var t=e.i(43476),s=e.i(71645);let a=({children:e,onClick:a,variant:l="primary",className:r="",type:n="button",disabled:i=!1})=>{let[o,c]=(0,s.useState)([]),[d,x]=(0,s.useState)({x:0,y:0}),u=(0,s.useRef)(null);return(0,t.jsxs)("button",{ref:u,type:n,onMouseMove:e=>{if(!u.current||i)return;let t=u.current.getBoundingClientRect(),s=t.left+t.width/2,a=t.top+t.height/2;100>Math.hypot(e.clientX-s,e.clientY-a)?x({x:(e.clientX-s)*.2,y:(e.clientY-a)*.2}):x({x:0,y:0})},onMouseLeave:()=>{x({x:0,y:0})},onClick:e=>{let t=e.currentTarget.getBoundingClientRect(),s=Math.max(t.width,t.height),l=e.clientX-t.left-s/2,r=e.clientY-t.top-s/2,n={id:Date.now(),x:l,y:r,size:s};c([...o,n]),setTimeout(()=>{c(e=>e.filter(e=>e.id!==n.id))},600),a&&a(e)},disabled:i,className:`uiverse-button ${l} ${r}`,style:{transform:`translate3d(${d.x}px, ${d.y}px, 0)`,transition:0===d.x?"transform 0.5s cubic-bezier(0.23, 1, 0.32, 1)":"none"},children:[(0,t.jsx)("span",{className:"ripples",children:o.map(e=>(0,t.jsx)("span",{className:"ripple",style:{left:e.x,top:e.y,width:e.size,height:e.size}},e.id))}),(0,t.jsx)("span",{className:"button-content",children:e})]})};e.s(["default",0,e=>(0,t.jsx)(a,{...e})],5665)},60530,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(75254);let l=(0,a.default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),r=(0,a.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var n=e.i(37727);let i=(0,a.default)("book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]),o=(0,a.default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),c=(0,a.default)("rotate-cw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),d=(0,a.default)("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]),x=(0,a.default)("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]),u=(0,a.default)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),h=(0,a.default)("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),m=(0,a.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),p=(0,a.default)("volume-x",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),g=(0,a.default)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]);var f=e.i(83086),y=e.i(31278),b=e.i(24523),j=e.i(5665);let w=({value:e,onChange:a,onSend:l,placeholder:r,disabled:n,onFileSelect:i})=>{let o=s.default.useRef(null);return s.default.useEffect(()=>{o.current&&(o.current.style.height="auto",o.current.style.height=o.current.scrollHeight+"px")},[e]),(0,t.jsxs)("div",{className:`messageBox ${n?"opacity-50 cursor-not-allowed":""}`,children:[(0,t.jsxs)("div",{className:"fileUploadWrapper",children:[(0,t.jsxs)("label",{htmlFor:"file",children:[(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 337 337",children:[(0,t.jsx)("circle",{strokeWidth:"20",stroke:"currentColor",fill:"none",r:"158.5",cy:"168.5",cx:"168.5"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeWidth:"25",stroke:"currentColor",d:"M167.759 79V259"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeWidth:"25",stroke:"currentColor",d:"M79 167.138H259"})]}),(0,t.jsx)("span",{className:"tooltip",children:"Resim Ekle (Yakında)"})]}),(0,t.jsx)("input",{type:"file",id:"file",name:"file",disabled:n,onChange:e=>i&&i(e.target.files[0])})]}),(0,t.jsx)("textarea",{ref:o,required:"",placeholder:r||"Deneyimini buraya yaz...",id:"messageInput",value:e,onChange:e=>a(e.target.value),onKeyDown:t=>{"Enter"===t.key&&!t.shiftKey&&e.trim()&&(t.preventDefault(),l())},disabled:n,rows:1}),(0,t.jsx)("button",{id:"sendButton",onClick:l,disabled:n||!e.trim(),type:"button",children:(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 664 663",children:[(0,t.jsx)("path",{fill:"none",d:"M646.293 331.888L17.7538 17.6187L155.245 331.888M646.293 331.888L17.753 646.157L155.245 331.888M646.293 331.888L318.735 330.228L155.245 331.888"}),(0,t.jsx)("path",{strokeLinejoin:"round",strokeLinecap:"round",strokeWidth:"33.67",stroke:"currentColor",d:"M646.293 331.888L17.7538 17.6187L155.245 331.888M646.293 331.888L17.753 646.157L155.245 331.888M646.293 331.888L318.735 330.228L155.245 331.888"})]})})]})};var v=e.i(4839);let k=(0,s.memo)(({title:e,currentPage:s,totalPages:a,onPrev:m,onNext:g,onReset:f,onJump:y,onToggleFullscreen:b,onPrint:j,onShare:w,onMastodonShare:v,isMastodonSharing:k,onToggleAudio:N,isSpeaking:C,onClose:S})=>(0,t.jsxs)("header",{className:"h-16 bg-white border-b border-neutral-200 px-6 flex items-center justify-between z-50 shadow-sm shrink-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(i,{size:20,className:"text-neutral-400"}),(0,t.jsx)("h1",{className:"font-bold text-neutral-800 text-sm tracking-tight truncate max-w-[200px]",children:e}),(0,t.jsx)("button",{onClick:f,title:"Back to Start",className:"flex items-center gap-1 ml-4 py-1 px-2 hover:bg-neutral-50 rounded-lg transition-colors cursor-pointer",children:(0,t.jsx)(o,{size:16,className:"text-neutral-400"})}),(0,t.jsx)("button",{onClick:y,title:"Go to End",className:"flex items-center gap-1 py-1 px-2 hover:bg-neutral-50 rounded-lg transition-colors cursor-pointer",children:(0,t.jsx)(c,{size:16,className:"text-neutral-400"})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-6",children:[(0,t.jsx)("button",{onClick:m,disabled:0===s,className:"p-2 hover:bg-neutral-50 rounded-lg disabled:opacity-20 transition-all text-neutral-600",children:(0,t.jsx)(l,{size:20})}),(0,t.jsxs)("div",{className:"text-xs font-bold tracking-widest text-neutral-500 tabular-nums",children:[s+1," / ",a]}),(0,t.jsx)("button",{onClick:g,disabled:s>=a-1,className:"p-2 hover:bg-neutral-50 rounded-lg disabled:opacity-20 transition-all text-neutral-600",children:(0,t.jsx)(r,{size:20})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 px-2 border-r border-neutral-200",children:[(0,t.jsx)("button",{onClick:b,title:"Fullscreen",className:"p-2 hover:bg-neutral-50 rounded-lg text-neutral-400 hover:text-neutral-600",children:(0,t.jsx)(d,{size:18})}),(0,t.jsx)("button",{onClick:j,title:"Print",className:"p-2 hover:bg-neutral-50 rounded-lg text-neutral-400 hover:text-neutral-600",children:(0,t.jsx)(x,{size:18})}),(0,t.jsx)("button",{onClick:w,title:"Share",className:"p-2 hover:bg-neutral-50 rounded-lg text-neutral-400 hover:text-neutral-600",children:(0,t.jsx)(u,{size:18})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 ml-1",children:[(0,t.jsxs)("button",{onClick:N,className:`flex items-center gap-2 px-4 py-1.5 rounded-full transition-all text-sm font-bold ${C?"bg-primary-500 text-white shadow-lg":"bg-primary-100 text-primary-600 hover:bg-primary-200"}`,children:[C?(0,t.jsx)(p,{size:16}):(0,t.jsx)(h,{size:16}),(0,t.jsx)("span",{children:"Listen"})]}),(0,t.jsx)("button",{onClick:S,className:"p-2 hover:bg-red-50 hover:text-red-500 rounded-lg text-neutral-400 ml-2 transition-colors",children:(0,t.jsx)(n.X,{size:20})})]})]})]})),N=(0,s.memo)(({page:e,pageNumber:s,alignment:a="left",onPageClick:l,author:r})=>(0,t.jsxs)("div",{onClick:l,className:`flex-1 relative overflow-hidden flex flex-col p-8 sm:p-16 lg:p-24 ${"left"===a?"border-r border-neutral-100":""} transition-all duration-500 cursor-pointer hover:bg-neutral-50/50 ${!e?"opacity-50 cursor-default":""}`,children:[(0,t.jsx)("div",{className:"absolute inset-0 paper-texture pointer-events-none"}),(0,t.jsxs)("div",{className:`relative z-10 flex flex-col h-full max-w-2xl mx-auto w-full ${"right"===a?"text-right":"text-left"}`,children:[(0,t.jsx)("div",{className:`text-[10px] sm:text-xs font-black tracking-[0.2em] text-neutral-300 uppercase mb-8 ${"right"===a?"text-right":"text-left"}`,children:r}),e?(0,t.jsxs)("div",{className:`flex-1 flex flex-col justify-start animate-fade-in-${a}`,children:[(0,t.jsx)("h3",{className:`text-xl font-bold mb-6 text-primary-600/60 uppercase tracking-widest text-sm ${"right"===a?"text-right":"text-left"}`,children:e.title}),(0,t.jsx)("div",{className:"prose prose-slate max-w-none",children:(0,t.jsx)("p",{className:`text-neutral-800 leading-relaxed font-serif text-lg sm:text-xl lg:text-3xl selection:bg-primary-100 ${"right"===a?"text-right pl-4":"text-left pr-4"} overflow-y-auto max-h-[60vh] custom-scrollbar`,children:e.content})})]}):(0,t.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center animate-pulse text-neutral-300",children:[(0,t.jsx)(i,{size:64,className:"mb-4 opacity-20"}),(0,t.jsx)("p",{className:"font-serif italic text-lg",children:"Last Page"})]}),(0,t.jsx)("div",{className:`mt-8 text-sm font-bold text-neutral-300 tabular-nums ${"right"===a?"text-right":"text-left"}`,children:s})]})]})),C=(0,s.memo)(({onClose:e})=>(0,t.jsx)("div",{className:"absolute inset-0 z-40 bg-white/60 backdrop-blur-md flex items-center justify-center animate-fade-in",children:(0,t.jsxs)("div",{className:"text-center p-12 bg-white rounded-[48px] shadow-2xl border border-neutral-100 scale-110",children:[(0,t.jsx)("h3",{className:"text-3xl font-bold mb-4 text-primary-600",children:"A Great Journey!"}),(0,t.jsx)("p",{className:"text-neutral-600 mb-8 max-w-xs mx-auto font-medium text-lg",children:"This story has completed its metamorphosis. New stories await you."}),(0,t.jsx)(j.default,{onClick:e,className:"!py-6 !px-16 !text-xl !rounded-full shadow-2xl",icon:m,children:"Finish and Return"})]})})),S=(0,s.memo)(({story:e,onClose:a})=>{let{refineStory:l,isProcessing:r}=(0,v.useStory)(),[i,o]=(0,s.useState)(0),[c,d]=(0,s.useState)(""),[x,u]=(0,s.useState)(!1),[h,p]=(0,s.useState)(null),j=(0,s.useMemo)(()=>e.pages||[],[e.pages]),S=j.length,M=e.themeColor||"#9333EA",z="KOZA TRAVELER",L=j[i],{toggle:A,isSpeaking:$,stop:E}=((e,t="tr-TR")=>{let[a,l]=(0,s.useState)(!1),[r,n]=(0,s.useState)(!1),[i,o]=(0,s.useState)(!1),c=(0,s.useRef)(null);(0,s.useEffect)(()=>{"speechSynthesis"in window&&o(!0)},[]),(0,s.useEffect)(()=>()=>{window.speechSynthesis.cancel()},[]);let d=(0,s.useCallback)(()=>{let e=window.speechSynthesis.getVoices();return e.find(e=>e.lang.startsWith(t))||e[0]},[t]),x=(0,s.useCallback)(()=>{if(!i||!e)return;window.speechSynthesis.cancel();let s=new SpeechSynthesisUtterance(e);s.lang=t,s.voice=d(),s.rate=.9,s.pitch=1,s.onstart=()=>{l(!0),n(!1)},s.onend=()=>{l(!1),n(!1)},s.onerror=e=>{console.error("Speech error",e),l(!1),n(!1)},c.current=s,window.speechSynthesis.speak(s)},[e,t,i,d]),u=(0,s.useCallback)(()=>{window.speechSynthesis.speaking&&(window.speechSynthesis.pause(),n(!0),l(!1))},[]),h=(0,s.useCallback)(()=>{window.speechSynthesis.paused?(window.speechSynthesis.resume(),n(!1),l(!0)):a||r||x()},[x,a,r]),m=(0,s.useCallback)(()=>{window.speechSynthesis.cancel(),l(!1),n(!1)},[]),p=(0,s.useCallback)(()=>{a?u():h()},[a,u,h]);return{speak:x,pause:u,resume:h,stop:m,toggle:p,isSpeaking:a,isPaused:r,supported:i}})(L?.content);(0,s.useEffect)(()=>{E()},[i,E]),(0,s.useEffect)(()=>()=>E(),[E]);let T=(0,s.useCallback)(()=>o(e=>Math.min(e+2,S%2==0?S-2:S-1)),[S]),R=(0,s.useCallback)(()=>o(e=>Math.max(e-2,0)),[]),q=(0,s.useCallback)(()=>{document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen().catch(e=>console.log(e)):document.documentElement.requestFullscreen()},[]),H=(0,s.useCallback)(()=>requestAnimationFrame(()=>window.print()),[]),P=(0,s.useCallback)(async()=>{let t={title:e.title,text:`Read this story I created with KOZA: ${e.title}`,url:window.location.href};try{navigator.share?await navigator.share(t):(await navigator.clipboard.writeText(window.location.href),alert("Link copied to clipboard!"))}catch(e){console.error("Share error:",e)}},[e.title]),[B,F]=(0,s.useState)(!1),K=async()=>{F(!0);try{await new Promise(e=>setTimeout(e,2e3)),alert("Hikaye Mastodon gönderi kuyruğuna eklendi!")}catch(e){console.error("Mastodon paylaşım hatası",e),alert("Paylaşılamadı. Hesabınız bağlı mı?")}finally{F(!1)}},W=async()=>{if(!c.trim())return;p("loading");let t=await l(e,c);t.success?(p("success"),d(""),setTimeout(()=>{p(null),u(!1)},2e3)):(p("error"),alert(t.message||"An error occurred."))};return j.length?(0,t.jsxs)("div",{className:"min-h-screen bg-[#f3f4f6] text-neutral-900 relative overflow-hidden flex flex-col font-sans",children:[(0,t.jsx)("div",{className:"fixed inset-0 pointer-events-none opacity-20",children:(0,t.jsx)(b.default,{color:M,intensity:.3})}),(0,t.jsx)(k,{title:e.title,currentPage:i,totalPages:S,onPrev:R,onNext:T,onReset:()=>o(0),onJump:()=>o(S-1),onToggleFullscreen:q,onPrint:H,onShare:P,onMastodonShare:K,isMastodonSharing:B,onToggleAudio:A,isSpeaking:$,onClose:a}),(0,t.jsxs)("div",{className:"absolute top-20 right-6 z-50 flex flex-col items-end gap-2",children:[(0,t.jsxs)("button",{onClick:()=>u(!x),className:`flex items-center gap-2 px-4 py-2 rounded-full font-bold text-sm transition-all shadow-lg active:scale-95 ${x?"bg-indigo-600 text-white":"bg-white text-indigo-600 hover:bg-neutral-50"}`,children:[(0,t.jsx)(f.Sparkles,{size:16}),(0,t.jsx)("span",{children:"Edit Story"})]}),x&&(0,t.jsxs)("div",{className:"w-80 bg-white p-4 rounded-3xl shadow-2xl border border-indigo-100 animate-fade-in-up mt-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-indigo-600 font-bold text-xs uppercase tracking-wider",children:[(0,t.jsx)(g,{size:14}),(0,t.jsx)("span",{children:"How shall we change it?"})]}),(0,t.jsx)("button",{onClick:()=>u(!1),className:"text-neutral-400 hover:text-neutral-600",children:(0,t.jsx)(n.X,{size:16})})]}),(0,t.jsx)("p",{className:"text-[10px] text-neutral-500 mb-4 leading-relaxed",children:'E.g.: "Add a side character", "Create a more magical atmosphere" or "Change the ending".'}),(0,t.jsx)(w,{value:c,onChange:d,onSend:W,disabled:"loading"===h,placeholder:"Your feedback..."}),"loading"===h&&(0,t.jsxs)("div",{className:"mt-4 flex items-center justify-center gap-2 text-indigo-600 font-bold text-xs animate-pulse",children:[(0,t.jsx)(y.Loader2,{size:16,className:"animate-spin"}),(0,t.jsx)("span",{children:"KOZA is weaving your story again..."})]}),"success"===h&&(0,t.jsxs)("div",{className:"mt-4 flex items-center justify-center gap-2 text-green-600 font-bold text-xs",children:[(0,t.jsx)(m,{size:16}),(0,t.jsx)("span",{children:"Transformation Complete!"})]})]})]}),(0,t.jsx)("main",{className:"flex-1 relative z-10 overflow-hidden",children:(0,t.jsxs)("div",{className:"w-full h-full bg-white book-depth flex relative overflow-hidden group shadow-2xl",children:[(0,t.jsx)("div",{className:"book-spine"}),(0,t.jsx)(N,{page:j[i],pageNumber:i+1,alignment:"left",onPageClick:R,author:z}),(0,t.jsx)(N,{page:j[i+1],pageNumber:i+2,alignment:"right",onPageClick:T,author:z}),i===S-1&&(0,t.jsx)(C,{onClose:a})]})}),(0,t.jsx)("div",{className:"h-1 bg-neutral-200 w-full shrink-0",children:(0,t.jsx)("div",{className:"h-full bg-primary-500 transition-all duration-700 ease-out",style:{width:`${(i+1)/S*100}%`}})})]}):(0,t.jsx)("div",{className:"min-h-screen bg-neutral-50 flex items-center justify-center p-8",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl border border-neutral-200 p-12 text-center shadow-xl",children:[(0,t.jsx)("p",{className:"text-neutral-600 mb-6 font-medium",children:"Story could not be loaded"}),(0,t.jsx)("button",{onClick:a,className:"text-primary-600 hover:text-primary-700 font-bold",children:"← Go Back"})]})})});e.s(["default",0,S],60530)}]);