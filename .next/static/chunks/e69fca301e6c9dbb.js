(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,49207,e=>{"use strict";var t=e.i(43476),s=e.i(83494),l=e.i(60880),r=e.i(73767);e.s(["default",0,()=>{let[e,a]=useState("local"),[n,i]=useState([]),[c,d]=useState(null),[o,x]=useState(!1),[u,m]=useState(!0),[h,p]=useState(!0),[f,j]=useState(null),y=useRef(null),{user:b}=(0,s.useAuth)(),{user:N}=(0,l.useUser)(),v=b?.uid||null,g=N?.displayName||b?.displayName||"Gezgin",w=N?.avatarUrl||b?.photoURL||"",k=useCallback(async(t=!1)=>{if(!o||t){x(!0),j(null);try{let s=await (0,r.getPublicFeed)(e,t?null:c);i(e=>t?s.posts:[...e,...s.posts]),d(s.lastDoc),p(s.posts.length>=20&&!!s.lastDoc)}catch(e){console.error("Feed error:",e),j("Paylaşımlar yüklenemedi. Lütfen internet bağlantınızı kontrol edin.")}finally{x(!1),m(!1)}}},[e,c,o]);return useEffect(()=>{m(!0),i([]),setCursor(null),p(!0),k(!0)},[e]),useEffect(()=>{if(!h||o||f)return;let e=new IntersectionObserver(e=>{e[0].isIntersecting&&k(!1)},{threshold:.1});return y.current&&e.observe(y.current),()=>e.disconnect()},[h,o,k]),(0,t.jsxs)("div",{className:"flex-1 flex flex-col h-full overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 pt-4 pb-0 shrink-0",children:[(0,t.jsx)("div",{className:"flex gap-1 bg-neutral-900 border border-neutral-800 rounded-xl p-1",children:TABS.map(s=>(0,t.jsx)("button",{onClick:()=>a(s.id),className:`px-4 py-1.5 text-xs font-semibold rounded-lg transition-all ${e===s.id?"bg-primary-600 text-white shadow-lg shadow-primary-500/20":"text-neutral-400 hover:text-white"}`,children:s.label},s.id))}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>k(!0),disabled:o,className:"p-2 rounded-xl text-neutral-500 hover:text-white hover:bg-neutral-800 transition-colors disabled:opacity-30",title:"Yenile",children:(0,t.jsx)(RefreshCw,{size:15,className:o?"animate-spin":""})}),(0,t.jsx)(NotificationCenter,{currentUserId:v})]})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto px-4 py-4 space-y-0",children:[(0,t.jsx)(PostComposer,{currentUserId:v,userName:g,avatarUrl:w,onPostSuccess:()=>k(!0)}),u&&(0,t.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(Loader2,{className:"w-8 h-8 text-primary-500 animate-spin mx-auto mb-3"}),(0,t.jsx)("p",{className:"text-sm text-neutral-500",children:"Topluluk yükleniyor..."})]})}),f&&!u&&(0,t.jsxs)("div",{className:"bg-red-950/30 border border-red-900/50 rounded-2xl p-6 text-center",children:[(0,t.jsx)("p",{className:"text-sm text-red-400 mb-3",children:f}),(0,t.jsx)("button",{onClick:()=>k(!0),className:"text-xs text-red-300 hover:text-white",children:"Tekrar Dene"})]}),!u&&!f&&0===n.length&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[(0,t.jsx)(Hash,{className:"w-10 h-10 text-neutral-700 mb-4"}),(0,t.jsx)("p",{className:"text-neutral-500 text-sm",children:"Henüz gönderi yok."}),(0,t.jsx)("p",{className:"text-neutral-700 text-xs mt-1",children:"İlk paylaşımı sen yap!"})]}),(0,t.jsx)("div",{className:"space-y-3",children:n.map(e=>(0,t.jsx)(PostCard,{post:e},e.id))}),(0,t.jsxs)("div",{ref:y,className:"h-10 flex items-center justify-center",children:[o&&!u&&(0,t.jsx)(Loader2,{className:"w-5 h-5 text-neutral-600 animate-spin"}),!h&&n.length>0&&(0,t.jsx)("p",{className:"text-xs text-neutral-700",children:"Tüm gönderiler yüklendi"})]})]})]})}])}]);