module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},24725,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},43285,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/dynamic-access-async-storage.external.js",()=>require("next/dist/server/app-render/dynamic-access-async-storage.external.js"))},51234,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"HandleISRError",{enumerable:!0,get:function(){return e}});let d=a.r(56704).workAsyncStorage;function e({error:a}){if(d){let b=d.getStore();if(b?.isStaticGeneration)throw a&&console.error(a),a}return null}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},40622,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return h}});let d=a.r(87924),e=a.r(51234),f={fontFamily:'system-ui,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji"',height:"100vh",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},g={fontSize:"14px",fontWeight:400,lineHeight:"28px",margin:"0 8px"},h=function({error:a}){let b=a?.digest;return(0,d.jsxs)("html",{id:"__next_error__",children:[(0,d.jsx)("head",{}),(0,d.jsxs)("body",{children:[(0,d.jsx)(e.HandleISRError,{error:a}),(0,d.jsx)("div",{style:f,children:(0,d.jsxs)("div",{children:[(0,d.jsxs)("h2",{style:g,children:["Application error: a ",b?"server":"client","-side exception has occurred while loading ",window.location.hostname," (see the"," ",b?"server logs":"browser console"," for more information)."]}),b?(0,d.jsx)("p",{style:g,children:`Digest: ${b}`}):null]})})]})]})};("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},8876,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(29512),e=a.i(29338),f=a.i(51480),g=a.i(79848),h=a.i(76455),i=a.i(89236),j=a.i(75235);let k=(0,c.createContext)(null),l=[];a.s(["StoryProvider",0,({children:m})=>{let{user:n,firestoreEnabled:o}=(0,e.useAuth)(),{cloudSynced:p}=(0,f.useUser)(),q=(0,i.useStoryActor)(),r=(0,j.useSelector)(q,a=>a.context.stories),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)(null),[A,B]=(0,d.default)("koza-stories",[]);(0,c.useEffect)(()=>{A&&A.length>0&&q.send({type:"STORY.FETCH_SUCCESS",stories:A})},[]),(0,c.useEffect)(()=>{B(r)},[r,B]),(0,c.useEffect)(()=>{if(!n||!o||!p)return;q.send({type:"STORY.FETCH_START"}),(async()=>{try{let a=await g.getUserStories(n.uid);if(a){let b=new Map;r.forEach(a=>b.set(String(a.id),a)),a.forEach(a=>b.set(String(a.id),a));let c=Array.from(b.values()).sort((a,b)=>new Date(b.createdAt||0)-new Date(a.createdAt||0)).slice(0,50);q.send({type:"STORY.FETCH_SUCCESS",stories:c})}else q.send({type:"STORY.FETCH_SUCCESS",stories:r})}catch(a){console.error("Story load error:",a),q.send({type:"STORY.FETCH_FAILURE",error:a.message})}})();let a=g.subscribeToStories(n.uid,a=>{a&&q.send({type:"STORY.FETCH_SUCCESS",stories:a})});return()=>a()},[n,o,p,q]);let C=(0,c.useCallback)(async a=>{let b={id:String(Date.now()),...a,createdAt:new Date().toISOString()};q.send({type:"STORY.CREATE_START"}),q.send({type:"STORY.CREATE_SUCCESS",story:b}),z(b);let c="story"===a.type?"story_created":"game_created";if(h.analytics.track(c,{title:a.title}),n&&o)try{await g.saveStory(n.uid,b)}catch(a){console.error("Save story failed",a),q.send({type:"STORY.CREATE_FAILURE",error:a.message})}},[n,o,q]),D=(0,c.useCallback)(async a=>{let b=String(a);if(q.send({type:"STORY.DELETE",id:b}),n&&o)try{await g.deleteStory(n.uid,b)}catch(a){console.error("Delete story failed",a),q.send({type:"STORY.FETCH_START"})}},[n,o,q]),E=(0,c.useCallback)(async(b,c)=>{q.send({type:"STORY.REFINE_START"}),v(!0);try{let{NarrativeDomain:d}=await a.A(40013),e=await d.processRefinementRequest(b,c);if(e.isSafetyTriggered)return q.send({type:"STORY.REFINE_FAILURE",error:e.message}),{success:!1,message:e.message};let f=e.data;return q.send({type:"STORY.REFINE_SUCCESS",story:f}),h.analytics.track("story_refined",{title:f.title}),n&&o&&await g.saveStory(n.uid,f),{success:!0,story:f}}catch(a){return console.error("Refinement failed:",a),q.send({type:"STORY.REFINE_FAILURE",error:a.message}),{success:!1,message:a.message}}finally{v(!1)}},[n,o,q]),F=c.default.useMemo(()=>({savedStories:r,activeStory:s,setActiveStory:t,isProcessing:u,setIsProcessing:v,analysisResult:w,setAnalysisResult:x,lastSavedStory:y,setLastSavedStory:z,communityWorks:l,saveStory:C,deleteStory:D,refineStory:E}),[r,s,u,w,y,C,D,E]);return(0,b.jsx)(k.Provider,{value:F,children:m})},"useStory",0,()=>{let a=(0,c.useContext)(k);if(!a)throw Error("useStory must be used within StoryProvider");return a}])},73570,a=>{"use strict";let b=(0,a.i(70106).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);a.s(["AlertTriangle",()=>b],73570)},1695,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(51480),e=a.i(8876),f=a.i(61542);let g=({children:a})=>{let{lastUserEvent:b,setLastUserEvent:g,setUser:h}=(0,d.useUser)(),{lastSavedStory:i,setLastSavedStory:j}=(0,e.useStory)(),{triggerNotification:k,addToast:l}=(0,f.useUI)();return(0,c.useEffect)(()=>{i&&(h(a=>({...a,storiesCreated:"story"===i.type?a.storiesCreated+1:a.storiesCreated,gamesCreated:"game"===i.type?a.gamesCreated+1:a.gamesCreated})),j(null))},[i,h,j]),(0,c.useEffect)(()=>{b&&("levelup"===b.type?k("levelup","Seviye Atladın!",`Yeni seviye: ${b.level}`):"xp"===b.type?k("xp",`+${b.amount} XP`,b.reason):"achievement"===b.type&&b.achievements.forEach(a=>{l("success","Başarı Kazanıldı!",`${a.icon} ${a.name}`)}),g(null))},[b,k,l,g]),a};a.s(["AppProvider",0,({children:a})=>(0,b.jsx)(d.UserProvider,{children:(0,b.jsx)(e.StoryProvider,{children:(0,b.jsx)(f.UIProvider,{children:(0,b.jsx)(g,{children:a})})})}),"useApp",0,()=>{let a=(0,d.useUser)(),b=(0,e.useStory)(),c=(0,f.useUI)();return{...a,...b,...c}}])},69527,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(73570),e=a.i(29338);class f extends c.default.Component{constructor(a){super(a),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,b){console.error("ErrorBoundary caught:",a,b),this.setState({errorInfo:b})}render(){return this.state.hasError?(0,b.jsxs)("div",{className:"min-h-screen bg-neutral-50 flex flex-col items-center justify-center px-4",children:[(0,b.jsxs)("div",{className:"max-w-md w-full bg-white rounded-2xl border border-neutral-200 p-8 text-center shadow-sm",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(d.AlertTriangle,{size:32,className:"text-red-600"})}),(0,b.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Bir Hata Oluştu"}),(0,b.jsx)("p",{className:"text-neutral-600 mb-6",children:"Üzgünüz, beklenmeyen bir sorun oluştu. Lütfen sayfayı yenileyin."}),(0,b.jsx)("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-neutral-900 text-white rounded-full font-medium hover:scale-105 transition-all shadow-lg active:scale-95",children:"Sayfayı Yenile"})]}),(0,b.jsx)(g,{error:this.state.error,errorInfo:this.state.errorInfo})]}):this.props.children}}let g=({error:a,errorInfo:c})=>{try{let{isAdmin:d}=(0,e.useAuth)();if(!d||!a)return null;return(0,b.jsxs)("div",{className:"mt-8 max-w-2xl w-full p-6 bg-red-50 rounded-2xl border border-red-100 text-left overflow-auto animate-fade-in shadow-sm",children:[(0,b.jsx)("p",{className:"font-mono text-sm text-red-700 whitespace-pre-wrap font-bold mb-2 border-b border-red-100 pb-2",children:"Admin View: Error Details"}),(0,b.jsx)("p",{className:"font-mono text-sm text-red-700 whitespace-pre-wrap",children:a.toString()}),c&&(0,b.jsx)("pre",{className:"mt-4 font-mono text-xs text-red-600 whitespace-pre-wrap p-3 bg-white/50 rounded-xl",children:c.componentStack})]})}catch(a){return null}};a.s(["default",0,f])},40013,a=>{a.v(b=>Promise.all(["server/chunks/ssr/src_services_geminiService_90da1b39.js","server/chunks/ssr/src_7125cb99._.js"].map(b=>a.l(b))).then(()=>b(11897)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__d0489050._.js.map