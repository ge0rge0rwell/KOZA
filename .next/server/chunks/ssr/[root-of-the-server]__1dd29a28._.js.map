{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../src/config.js","../../../../src/context/UserContext.jsx","../../../../src/hooks/useLocalStorage.js","../../../../src/services/firestoreService.js","../../../../src/utils/analytics.js","../../../../src/context/UIContext.jsx"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","export const APP_CONFIG = {\n    NAME: \"KOZA\",\n    VERSION: \"2.0.0\"\n};\n\nexport const API_CONFIG = {\n    GEMINI_API_KEY: process.env.NEXT_PUBLIC_GEMINI_API_KEY || \"AIzaSyDITPa_2fG8x6aUjZ8DsA_f9l3AdWA7ToQ\"\n};\n\nexport const FIREBASE_CONFIG = {\n    apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY || \"\",\n    authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN || \"\",\n    projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID || \"\",\n    storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET || \"\",\n    messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID || \"\",\n    appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID || \"\"\n};\n\nexport const ANALYTICS_CONFIG = {\n    measurementId: process.env.NEXT_PUBLIC_GA_MEASUREMENT_ID || \"\"\n};\n","'use client';\nimport React, { createContext, useContext, useEffect, useState, useCallback } from 'react';\nimport useLocalStorage from '../hooks/useLocalStorage';\nimport { useAuth } from './AuthContext';\nimport * as firestoreService from '../services/firestoreService';\nimport { analytics } from '../utils/analytics';\nimport { checkAchievements } from '../utils/achievements';\n\nconst UserContext = createContext(null);\n\nconst DEFAULT_USER = {\n    xp: 850,\n    level: 1,\n    nextLevelXp: 1000,\n    storiesRead: 3,\n    gamesPlayed: 1,\n    storiesCreated: 0,\n    gamesCreated: 0,\n    totalXP: 850,\n    dailyStreak: 0,\n    lastVisit: null,\n    title: \"Empati Ã‡Ä±raÄŸÄ±\",\n    badges: [\n        { id: 1, name: \"Ä°lk AdÄ±m\", unlocked: true },\n        { id: 2, name: \"Hikaye AnlatÄ±cÄ±sÄ±\", unlocked: false },\n        { id: 3, name: \"Topluluk YÄ±ldÄ±zÄ±\", unlocked: false },\n    ],\n    achievements: []\n};\n\n// XState Imports\nimport { useUserActor } from './GlobalStateMachineContext';\nimport { useSelector } from '@xstate/react';\n\nexport const UserProvider = ({ children }) => {\n    const { user: authUser, firestoreEnabled } = useAuth();\n\n    // Connect to User Machine\n    const userActor = useUserActor();\n    const user = useSelector(userActor, (snapshot) => snapshot.context.user);\n    const syncStatus = useSelector(userActor, (snapshot) => snapshot.context.syncStatus);\n    const isSyncing = syncStatus === 'syncing';\n    const cloudSynced = syncStatus === 'synced'; // or check specific state matching\n\n    // Local Storage Sync (Manual implementation to replace useLocalStorage hook's auto-write)\n    const [storedUser, setStoredUser] = useLocalStorage('koza-user', DEFAULT_USER);\n\n    // Initial Load\n    useEffect(() => {\n        if (storedUser) {\n            userActor.send({ type: 'USER.LOAD_DATA', data: storedUser });\n        }\n    }, []); // Run once on mount\n\n    // Persist machine state to local storage\n    useEffect(() => {\n        if (user) {\n            setStoredUser(user);\n        }\n    }, [user, setStoredUser]);\n\n    // We keep lastUserEvent for the AppContextBridge to pick up (Toast notifications)\n    // We can detect changes in user.level or user.achievements to set this.\n    // However, the machine handles the logic. \n    // Optimization: logic from 'userMachine' is pure, but we need to know *when* an event happened.\n    // We can listen to the actor's event stream.\n    const [lastUserEvent, setLastUserEvent] = useState(null);\n\n    useEffect(() => {\n        const subscription = userActor.on('USER.AWARD_XP', (event) => {\n            // This listener might not be supported on the actor ref directly in all versions, \n            // but 'actor.subscribe' gives us state changes. \n            // Inspection API is better. For now, let's use the diffing approach for simplicity and robustness.\n        });\n        return () => {\n            if (subscription && typeof subscription.unsubscribe === 'function') subscription.unsubscribe();\n        };\n    }, [userActor]);\n\n    // Simple Diffing for Notifications (Robust fallback)\n    const [prevUser, setPrevUser] = useState(user);\n\n    useEffect(() => {\n        if (!user || !prevUser) {\n            setPrevUser(user);\n            return;\n        }\n\n        if (user.level > prevUser.level) {\n            setLastUserEvent({ type: 'levelup', level: user.level });\n        } else if (user.xp > prevUser.xp) {\n            const diff = user.xp - prevUser.xp;\n            if (diff > 0) {\n                // We don't have the 'reason' here easily unless we store it in machine context \n                // or listen to the event. For now, generic reason or passed via a side-channel?\n                // Actually, we can just say \"XP KazanÄ±ldÄ±\".\n                setLastUserEvent({ type: 'xp', amount: diff, reason: \"BaÅŸarÄ±m\" });\n            }\n        }\n\n        if (user.achievements.length > prevUser.achievements.length) {\n            // Find new achievements\n            const newIds = user.achievements.filter(id => !prevUser.achievements.includes(id));\n            // We need to map IDs to objects. We'll need the checkAchievements utility or specific list.\n            // For now, let's assume we can fetch metadata elsewhere or just notify generic.\n            // But AppContextBridge expects 'achievements' array.\n            // Let's reload achievements metadata? \n            // Ideally the machine event `USER.AWARD_XP` could carry the result, but machines are pure.\n\n            // Quick fix: allow LastUserEvent to be set by the awardXP wrapper too?\n            // No, let's stick to state diffing.\n            const newAch = newIds.map(id => ({ id, name: \"Yeni BaÅŸarÄ±m\", icon: \"ðŸ†\" })); // Placeholder\n            setLastUserEvent({ type: 'achievement', achievements: newAch });\n        }\n\n        setPrevUser(user);\n    }, [user]);\n\n    // Track daily streak\n    useEffect(() => {\n        const today = new Date().toDateString();\n        // Safety check: if user is null (cleared storage but not context), skip\n        if (!user) return;\n        const lastVisit = user.lastVisit;\n\n        if (lastVisit !== today) {\n            const yesterday = new Date();\n            yesterday.setDate(yesterday.getDate() - 1);\n            const yesterdayStr = yesterday.toDateString();\n\n            const newStreak = lastVisit === yesterdayStr ? user.dailyStreak + 1 : 1;\n\n            userActor.send({\n                type: 'USER.UPDATE_PROFILE',\n                data: { lastVisit: today, dailyStreak: newStreak }\n            });\n        }\n    }, [user?.lastVisit, userActor]); // Depend on lastVisit to avoid loops, but need to be careful.\n    // Actually, if we update user, user changes, effect runs again?\n    // user.lastVisit will be today after update. 'today' will be same. Condition `lastVisit !== today` will be false. Safe.\n\n    // Sync with Firestore\n    useEffect(() => {\n        if (!authUser || !firestoreEnabled || cloudSynced) return;\n\n        // Trigger Sync in machine\n        userActor.send({ type: 'USER.SYNC_START' });\n\n        const syncData = async () => {\n            try {\n                console.log('ðŸ”„ User: Initiating full cloud synchronization...');\n                const localStories = JSON.parse(localStorage.getItem('koza-stories') || '[]');\n\n                // We pass 'user' from the machine state (which is loaded from localStorage initially)\n                const currentLocalUser = user || storedUser;\n\n                const syncResult = await firestoreService.syncLocalToCloud(authUser.uid, {\n                    user: currentLocalUser,\n                    stories: localStories\n                });\n\n                if (syncResult && syncResult.profile) {\n                    // Update machine with cloud data\n                    userActor.send({ type: 'USER.UPDATE_PROFILE', data: syncResult.profile });\n                    userActor.send({ type: 'USER.SYNC_SUCCESS' });\n\n                    if (syncResult.migrated) {\n                        console.log('âœ… Local data successfully migrated to cloud');\n                    }\n                } else {\n                    userActor.send({ type: 'USER.SYNC_SUCCESS' }); // Even if no changes, we synced.\n                }\n            } catch (error) {\n                console.error('User Sync error:', error);\n                userActor.send({ type: 'USER.SYNC_FAILURE', error: error.message });\n            }\n        };\n\n        syncData();\n    }, [authUser, firestoreEnabled, cloudSynced, userActor]);\n\n    // Real-time Updates\n    useEffect(() => {\n        if (!authUser || !firestoreEnabled || !cloudSynced) return;\n        const unsubscribe = firestoreService.subscribeToProfile(authUser.uid, (data) => {\n            if (data) {\n                userActor.send({ type: 'USER.UPDATE_PROFILE', data });\n            }\n        });\n        return () => unsubscribe();\n    }, [authUser, firestoreEnabled, cloudSynced, userActor]);\n\n    // Debounced Sync to Firestore (Background Save)\n    useEffect(() => {\n        if (!authUser || !firestoreEnabled || !cloudSynced || !user) return;\n\n        const syncTimer = setTimeout(() => {\n            firestoreService.updateUserProfile(authUser.uid, {\n                xp: user.xp,\n                level: user.level,\n                nextLevelXp: user.nextLevelXp,\n                totalXP: user.totalXP,\n                storiesCreated: user.storiesCreated,\n                gamesCreated: user.gamesCreated,\n                storiesRead: user.storiesRead,\n                gamesPlayed: user.gamesPlayed,\n                dailyStreak: user.dailyStreak,\n                lastVisit: user.lastVisit,\n                title: user.title,\n                achievements: user.achievements,\n                badges: user.badges\n            }).catch(e => console.error(\"Background sync error:\", e));\n        }, 2000);\n\n        return () => clearTimeout(syncTimer);\n    }, [user, authUser, firestoreEnabled, cloudSynced]);\n\n    const awardXP = useCallback((amount, reason) => {\n        analytics.track('xp_awarded', { amount, reason });\n\n        // Store reason temporarily for the diff effect? \n        // Or just fire and forget. The diff effect will catch the XP change.\n        userActor.send({ type: 'USER.AWARD_XP', amount });\n\n        // Manual override for reason tracking if needed for toast\n        // We could set a short-lived state here?\n        // But AppContextBridge relies on 'lastUserEvent'. \n        // Let's set it here explicitly for the 'reason' context.\n        // But wait, if we set it here, and also the diff effect sets it...\n        // Let's trust the diff effect for now, or improve it later.\n        // Actually, to get the \"Reason\" into the Toast, we need it.\n        // Simple hack: \n        setLastUserEvent({ type: 'xp', amount, reason });\n\n    }, [userActor]);\n\n    /* \n       Direct setter replacement. \n       components calling setUser(newData) or setUser(prev => ...)\n       We need to support functional updates if we want full compatibility.\n    */\n    const setUser = useCallback((update) => {\n        let newData;\n        if (typeof update === 'function') {\n            // This is dangerous if we don't have current 'user'. \n            // We can read 'user' from the closure, but it might be stale?\n            // useSelector 'user' is the latest render value.\n            // XState doesn't support \"updater functions\" in events directly usually.\n            // We'll calculate it here.\n            // CAUTION: 'user' dependency might cause re-creation of setUser, \n            // but that's standard React.\n            // We can use actor.getSnapshot().context.user to be safe?\n            const currentUser = userActor.getSnapshot().context.user || DEFAULT_USER;\n            newData = update(currentUser);\n        } else {\n            newData = update;\n        }\n\n        userActor.send({ type: 'USER.UPDATE_PROFILE', data: newData });\n    }, [userActor]);\n\n    const value = React.useMemo(() => ({\n        user,\n        setUser,\n        awardXP,\n        isSyncing,\n        cloudSynced,\n        lastUserEvent,\n        setLastUserEvent\n    }), [\n        user,\n        setUser,\n        awardXP,\n        isSyncing,\n        cloudSynced,\n        lastUserEvent,\n        setLastUserEvent\n    ]);\n\n    return <UserContext.Provider value={value}>{children}</UserContext.Provider>;\n\n    // Note: The original returned children wrapped in provider. \n    // We are doing the same.\n};\n\nexport const useUser = () => {\n    const context = useContext(UserContext);\n    if (!context) throw new Error('useUser must be used within UserProvider');\n    return context;\n};\n","import { useState, useEffect } from 'react';\n\nexport default function useLocalStorage(key, initialValue) {\n    const [storedValue, setStoredValue] = useState(() => {\n        if (typeof window === 'undefined') return initialValue;\n        try {\n            const item = window.localStorage.getItem(key);\n            const parsed = item ? JSON.parse(item) : initialValue;\n            return parsed !== null ? parsed : initialValue;\n        } catch (error) {\n            console.log(error);\n            return initialValue;\n        }\n    });\n\n    const setValue = (value) => {\n        try {\n            const valueToStore = value instanceof Function ? value(storedValue) : value;\n            setStoredValue(valueToStore);\n            if (typeof window !== 'undefined') {\n                window.localStorage.setItem(key, JSON.stringify(valueToStore));\n            }\n        } catch (error) {\n            console.log(error);\n        }\n    };\n\n    return [storedValue, setValue];\n}\n","import { doc, setDoc, getDoc, updateDoc, deleteDoc, collection, query, orderBy, onSnapshot, serverTimestamp, writeBatch } from 'firebase/firestore';\nimport { db } from './firebase';\n\n// Remove the initialize function as we now import db directly\n// export const initializeFirestore = (app) => { ... } is no longer needed\nconst DEFAULT_USER = {\n    xp: 0,\n    level: 1,\n    nextLevelXp: 1000,\n    title: \"Empati Ã‡Ä±raÄŸÄ±\"\n};\n\n// ==================== USER PROFILE ====================\n\nexport const getUserProfile = async (userId) => {\n    if (!db) throw new Error('Firestore not initialized');\n\n    try {\n        const docRef = doc(db, 'users', userId, 'data', 'profile');\n        const docSnap = await getDoc(docRef);\n\n        if (docSnap.exists()) {\n            return docSnap.data();\n        }\n        return null;\n    } catch (error) {\n        console.error('Error getting user profile:', error);\n        throw error;\n    }\n};\n\nexport const createUserProfile = async (userId, profileData) => {\n    if (!db) throw new Error('Firestore not initialized');\n\n    try {\n        const docRef = doc(db, 'users', userId, 'data', 'profile');\n        const data = {\n            ...profileData,\n            createdAt: serverTimestamp(),\n            updatedAt: serverTimestamp()\n        };\n\n        await setDoc(docRef, data);\n        return data;\n    } catch (error) {\n        console.error('Error creating user profile:', error);\n        throw error;\n    }\n};\n\n// ==================== WRITE BUFFERING (SCALE HARDENING) ====================\nconst profileBuffer = new Map();\nlet syncTimeout = null;\nconst SYNC_DEBOUNCE_MS = 2000;\n\nconst commitProfileSync = async (userId) => {\n    if (!profileBuffer.has(userId) || !db) return;\n\n    const data = profileBuffer.get(userId);\n    profileBuffer.delete(userId);\n\n    try {\n        const docRef = doc(db, 'users', userId, 'data', 'profile');\n        await updateDoc(docRef, {\n            ...data,\n            updatedAt: serverTimestamp()\n        });\n        console.log(`â˜ï¸ Cloud Sync: Profile updated for ${userId}`);\n    } catch (error) {\n        console.error('Buffer Sync Error:', error);\n        // Put back in buffer on failure to retry\n        profileBuffer.set(userId, { ...data, ...profileBuffer.get(userId) });\n    }\n};\n\nexport const updateUserProfile = async (userId, updates) => {\n    if (!db) throw new Error('Firestore not initialized');\n\n    // Add to buffer\n    const current = profileBuffer.get(userId) || {};\n    profileBuffer.set(userId, { ...current, ...updates });\n\n    // Debounce commit\n    if (syncTimeout) clearTimeout(syncTimeout);\n    syncTimeout = setTimeout(() => commitProfileSync(userId), SYNC_DEBOUNCE_MS);\n\n    return { ...current, ...updates, buffered: true };\n};\n\n// ==================== STORIES ====================\n\nexport const getUserStories = async (userId) => {\n    if (!db) throw new Error('Firestore not initialized');\n\n    try {\n        const storiesRef = collection(db, 'users', userId, 'stories');\n        const q = query(storiesRef, orderBy('createdAt', 'desc'));\n\n        return new Promise((resolve, reject) => {\n            const unsubscribe = onSnapshot(q,\n                (snapshot) => {\n                    const stories = [];\n                    snapshot.forEach((doc) => {\n                        stories.push({ id: doc.id, ...doc.data() });\n                    });\n                    unsubscribe();\n                    resolve(stories);\n                },\n                (error) => {\n                    unsubscribe();\n                    reject(error);\n                }\n            );\n        });\n    } catch (error) {\n        console.error('Error getting user stories:', error);\n        throw error;\n    }\n};\n\nexport const saveStory = async (userId, story) => {\n    if (!db) throw new Error('Firestore not initialized');\n\n    try {\n        const storyId = String(story.id || Date.now());\n        const docRef = doc(db, 'users', userId, 'stories', storyId);\n\n        const data = {\n            ...story,\n            id: storyId,\n            createdAt: story.createdAt || serverTimestamp(),\n            updatedAt: serverTimestamp()\n        };\n\n        await setDoc(docRef, data);\n        return { ...data, id: storyId };\n    } catch (error) {\n        console.error('Error saving story:', error);\n        throw error;\n    }\n};\n\nexport const deleteStory = async (userId, storyId) => {\n    if (!db) throw new Error('Firestore not initialized');\n\n    try {\n        const docRef = doc(db, 'users', userId, 'stories', String(storyId));\n        await deleteDoc(docRef);\n    } catch (error) {\n        console.error('Error deleting story:', error);\n        throw error;\n    }\n};\n\n// ==================== REAL-TIME SYNC ====================\n\nexport const subscribeToProfile = (userId, callback) => {\n    if (!db) {\n        console.warn('Firestore not initialized, skipping subscription');\n        return () => { };\n    }\n\n    try {\n        const docRef = doc(db, 'users', userId, 'data', 'profile');\n\n        const unsubscribe = onSnapshot(docRef,\n            (doc) => {\n                if (doc.exists()) {\n                    callback(doc.data());\n                }\n            },\n            (error) => {\n                console.error('Error in profile subscription:', error);\n            }\n        );\n\n        return unsubscribe;\n    } catch (error) {\n        console.error('Error subscribing to profile:', error);\n        return () => { };\n    }\n};\n\nexport const subscribeToStories = (userId, callback) => {\n    if (!db) {\n        console.warn('Firestore not initialized, skipping subscription');\n        return () => { };\n    }\n\n    try {\n        const storiesRef = collection(db, 'users', userId, 'stories');\n        const q = query(storiesRef, orderBy('createdAt', 'desc'));\n\n        const unsubscribe = onSnapshot(q,\n            (snapshot) => {\n                const stories = [];\n                snapshot.forEach((doc) => {\n                    stories.push({ id: doc.id, ...doc.data() });\n                });\n                callback(stories);\n            },\n            (error) => {\n                console.error('Error in stories subscription:', error);\n            }\n        );\n\n        return unsubscribe;\n    } catch (error) {\n        console.error('Error subscribing to stories:', error);\n        return () => { };\n    }\n};\n\n// ==================== BATCH OPERATIONS ====================\n\nexport const batchSaveStories = async (userId, stories) => {\n    if (!db) throw new Error('Firestore not initialized');\n\n    try {\n        const batch = writeBatch(db);\n\n        stories.forEach((story) => {\n            const storyId = String(story.id || (Date.now() + Math.random()));\n            const docRef = doc(db, 'users', userId, 'stories', storyId);\n\n            batch.set(docRef, {\n                ...story,\n                id: storyId,\n                createdAt: story.createdAt || serverTimestamp(),\n                updatedAt: serverTimestamp()\n            });\n        });\n\n        await batch.commit();\n        console.log(`âœ… Batch saved ${stories.length} stories to cloud`);\n    } catch (error) {\n        console.error('Error batch saving stories:', error);\n        throw error;\n    }\n};\n\n// ==================== SYNC HELPERS ====================\n\nexport const syncLocalToCloud = async (userId, localData) => {\n    if (!db) {\n        console.warn('Firestore not initialized, skipping cloud sync');\n        return null;\n    }\n\n    try {\n        // 1. Get existing cloud profile\n        const cloudProfile = await getUserProfile(userId);\n        let profileToUse = cloudProfile;\n\n        // 2. Migration Gap Fix: Always attempt to push local stories to cloud\n        // Using batchSaveStories is safe because it uses setDoc which is idempotent\n        if (localData.stories && localData.stories.length > 0) {\n            console.log(`ðŸ“¤ Syncing ${localData.stories.length} local stories to cloud...`);\n            await batchSaveStories(userId, localData.stories);\n        }\n\n        if (!cloudProfile) {\n            // First time sign in - Create profile from local stats\n            console.log('ðŸ“¤ Creating initial cloud profile for user:', userId);\n\n            profileToUse = {\n                xp: localData.user?.xp || DEFAULT_USER.xp,\n                level: localData.user?.level || DEFAULT_USER.level,\n                nextLevelXp: localData.user?.nextLevelXp || DEFAULT_USER.nextLevelXp,\n                totalXP: localData.user?.totalXP || localData.user?.xp || DEFAULT_USER.xp,\n                storiesCreated: localData.user?.storiesCreated || 0,\n                gamesCreated: localData.user?.gamesCreated || 0,\n                storiesRead: localData.user?.storiesRead || 0,\n                gamesPlayed: localData.user?.gamesPlayed || 0,\n                dailyStreak: localData.user?.dailyStreak || 0,\n                lastVisit: localData.user?.lastVisit || new Date().toISOString(),\n                title: localData.user?.title || DEFAULT_USER.title,\n                achievements: localData.user?.achievements || [],\n                badges: localData.user?.badges || []\n            };\n\n            await createUserProfile(userId, profileToUse);\n            console.log('âœ… Migration complete');\n            return { migrated: true, profile: profileToUse };\n        } else {\n            // Merging: For now Cloud Profile wins on stats, but stories were merged above\n            console.log('ðŸ”„ Profile exists in cloud, prioritizing cloud stats');\n            return { migrated: false, profile: cloudProfile };\n        }\n    } catch (error) {\n        console.error('Error in syncLocalToCloud:', error);\n        throw error;\n    }\n};\n","/**\n * Analytics and tracking utilities\n */\n\nimport { googleAnalytics } from './googleAnalytics';\n\nclass Analytics {\n    constructor() {\n        this.events = [];\n        this.sessionStart = Date.now();\n    }\n\n    track(eventName, properties = {}) {\n        const event = {\n            name: eventName,\n            timestamp: Date.now(),\n            sessionDuration: Date.now() - this.sessionStart,\n            ...properties\n        };\n\n        this.events.push(event);\n\n        // Store in localStorage for persistence\n        this.saveToStorage();\n\n        // Send to Google Analytics\n        googleAnalytics.trackEvent(\n            'app_interaction',\n            eventName,\n            properties.label || '',\n            properties.value || undefined\n        );\n\n        console.log('ðŸ“Š Analytics:', eventName, properties);\n    }\n\n    saveToStorage() {\n        try {\n            const stored = JSON.parse(localStorage.getItem('koza-analytics') || '[]');\n            const combined = [...stored, ...this.events].slice(-100); // Keep last 100 events\n            localStorage.setItem('koza-analytics', JSON.stringify(combined));\n            this.events = [];\n        } catch (e) {\n            console.error('Failed to save analytics:', e);\n        }\n    }\n\n    getStats() {\n        try {\n            const events = JSON.parse(localStorage.getItem('koza-analytics') || '[]');\n            return {\n                totalEvents: events.length,\n                storiesCreated: events.filter(e => e.name === 'story_created').length,\n                gamesCreated: events.filter(e => e.name === 'game_created').length,\n                xpEarned: events\n                    .filter(e => e.name === 'xp_awarded')\n                    .reduce((sum, e) => sum + (e.amount || 0), 0),\n                lastActivity: events.length > 0 ? events[events.length - 1].timestamp : null\n            };\n        } catch {\n            return null;\n        }\n    }\n}\n\nexport const analytics = new Analytics();\n","'use client';\nimport React, { createContext, useContext, useState, useCallback, useEffect } from 'react';\n\nconst UIContext = createContext(null);\n\nexport const UIProvider = ({ children }) => {\n    const [currentView, setCurrentView] = useState(null);\n    const [activeTab, setActiveTab] = useState('create');\n    const [notification, setNotification] = useState(null);\n    const [toasts, setToasts] = useState([]);\n    const [showOnboarding, setShowOnboarding] = useState(false);\n\n    useEffect(() => {\n        const complete = localStorage.getItem('koza-onboarding-complete');\n        if (!complete) {\n            setShowOnboarding(true);\n        }\n    }, []);\n\n\n\n    const addToast = useCallback((type, title, message) => {\n        const id = Date.now();\n        setToasts(prev => [...prev, { id, type, title, message }]);\n        setTimeout(() => {\n            setToasts(prev => prev.filter(t => t.id !== id));\n        }, 3000);\n    }, []);\n\n    // Helper to trigger notifications\n    const triggerNotification = useCallback((type, title, message) => {\n        setNotification({ type, title, message });\n        setTimeout(() => setNotification(null), 3000);\n    }, []);\n\n    const value = {\n        currentView,\n        setCurrentView,\n        activeTab,\n        setActiveTab,\n        notification,\n        setNotification, // Exposed for legacy, but triggerNotification is preferred\n        triggerNotification,\n        toasts,\n        setToasts,\n        addToast,\n        showOnboarding,\n        setShowOnboarding\n    };\n\n    return <UIContext.Provider value={value}>{children}</UIContext.Provider>;\n};\n\nexport const useUI = () => {\n    const context = useContext(UIContext);\n    if (!context) throw new Error('useUI must be used within UIProvider');\n    return context;\n};\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","vendored","ReactJsxRuntime","React"],"mappings":"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","ignoreList":[0,1,2]}